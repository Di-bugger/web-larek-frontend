# Проектная работа "Веб-ларек"
Реализация интернет-магазина с товарами для веб-разработчиков — Web-ларёк.
В нём можно посмотреть каталог товаров, добавить товары в корзину и сделать заказ.

- Используемый стек: TypeScript, HTML, SCSS.
- Для сборки используется Webpack.

Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
## Архитектура

В проекте применен принцип MVP (Model-View-Presenter), обеспечивающий четкое разделение ответственностей:

- Model: Отвечает за работу с данными: загрузку данных по API, их хранение и обработку данных, введенных пользователем.
- View: Отвечает за отображение интерфейса, взаимодействие с пользователем и уведомление Presenter’а о действиях пользователя.
- Presenter: Отвечает за связь модели данных и отображения. В данном проекте Presenter - EventEmitter.

## Базовый код

### 1. Класс ```Component<T> ```
Базовый класс, используется для создания моделей представления. 

Констурктор принимает HTML элемент.

Класс имеет такие основные методы:
- ```toggleClass``` - для переключения класса. В качестве параметров принимается HTML элемент и класс, который необходимо включить или выключить в третьем параметре.
- ```setText``` - для установки текста. В качестве парметров принимается HTML элемент, в который будет вставляться в текст и сам текст.
- ```setHidden``` - для скрытия элемента. В качестве парметров принимается HTML элемент.
- ```setVisible``` - для отображения элемента. В качестве парметров принимается HTML элемент.
- ```setImage``` - для установки изображения по переданному в параметрах src, в переданный в параметрах html-элемент. \
Так же необязательным параметром можно установить alt.
- ```render``` - для возвращения корневого элемента DOM.

### 2. Класс ```EventEmitter<T> ```
Базовый класс, используется для создания слушателей события.
Его функции: возможность установить и снять слушателей событий, вызвать слушателей при возникновении события.

Класс имеет такие основные методы:

- ``` on ```,  ```off ```,  ```emit ```  — для подписки на событие, отписки от события и уведомления
подписчиков о наступлении события соответственно.
Дополнительно реализованы методы 
- ```onAll``` и  ```offAll```  — для подписки на все события и сброса всех
подписчиков.

### 3. Класс ```Api ```
Базовый класс, используется для работы с api.

В конструкторе принимает базовый url, на который необходимо сделать запрос, а так же если необходимо дополнительные опции.

Класс имеет такие основные методы:
- ```get``` - для получения данных с сервера.
- ```post``` - для отправки данных на сервер. Метод может принимать в качестве параметра необходимый HTTP метод

## Компоненты модели данных

### 3. Класс ```ModelApi ```
Класс осуществляет доступ к данным и их получение через api. Наследуется от класса Api.

Констурктор класса принимает url, cdm, и необязателньый параметр option. 

У класса есть поля:
- ```items: IProductItem[]``` - поле хранит массив из обьектов - товаров.
- ```cdn: string;``` - cdn для картинки товара.

Класс имеет такие основные методы:
- ```getProductList``` - получает массив обьектов - продуктов.


### 3. Класс ```ModelBasket ```
Класс осуществляте доступ к данным корзины и способы взаимодействия с ней - удаление и добавление товара.

Конструктор не приниает никаких парметров. Происходит иницилиация items - пустым массивом.

У класса есть поля:
- ```items: IProductItem[] = []``` - поле хранящее массив обьектов - товаров, помещенных в корзину.
- ```totalPrice: number``` - финальная цена товаров в корзине.

Класс имеет такие основные методы:
- ```addItem``` - добавляет товар, переданный в качестве параметра, в корзину.
- ```removeItem``` - удаляет товара из корзины по переданному значению id из карточки товара.
- ```getCountItems``` - получает количество товаров в корзине.
- ```clearBasket``` - очищает корзину.

У класса имеются get и set:
- ```get items``` - для получения корзины с товарами.
- ```set items(data: IProductItem[]) ``` - для  установки товаров в корзине - items (защищенное свойство)
- ```get totalPrice``` - для получения общей стоимости товаров  в корзине.

### 3. Класс ```ModelCatalog ```
Класс осуществляет доступ к данным каталога товаров.

Констурктор принимает Events - благодаря которому можно навесить слушатель события на изменение данных.

У класса есть поля:
- ```productList: IProductItem[]``` - поле содержит все товары в каталоге. Имеется доступ для получения каталога и установки каталога.

У класса имеются get и set:
- ```get productList``` - для получения списка всех товаров.
- ```set productList(data: IProductItem[])``` - для установки списка всех товаров. А так же навешивание слушателя события ```'productList:changed'```

### 3. Класс ```UserDataModel ```
Класс осуществляет доступ к веденным данным пользователя для заказа.

Констурктор принимает Events - благодаря которому можно навесить слушатель события на изменение данных.

У класса есть поля:
- ```email```,```phone```, ```address```, ```typeCost```, ```totalCost``` - данные о Email, телефон, адресс доставки, тип оплаты, полная стоимость заказа.
- ```orderItems``` - список заказанных товаров

Класс имеет такие основные методы:
- ```addAddress``` - устанавливает определенный адресс доставки
- ```addInfoUser``` - проверяет передаваемый параметр и  устанавливает либо номер телефона, либо email
- ```getOrder``` - формирует окончательный обьект заказа.







